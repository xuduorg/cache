/**
 * Created by Mengkun(https://mkblog.cn) on 2017/12/17.
 * 
 * Updated On 2020/08/15
 */


/*!
 * headroom.js v0.9.4 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2017 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Headroom=b()}(this,function(){"use strict";function a(a){this.callback=a,this.ticking=!1}function b(a){return a&&"undefined"!=typeof window&&(a===window||a.nodeType)}function c(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var d,e,f=a||{};for(e=1;e<arguments.length;e++){var g=arguments[e]||{};for(d in g)"object"!=typeof f[d]||b(f[d])?f[d]=f[d]||g[d]:f[d]=c(f[d],g[d])}return f}function d(a){return a===Object(a)?a:{down:a,up:a}}function e(a,b){b=c(b,e.options),this.lastKnownScrollY=0,this.elem=a,this.tolerance=d(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.scroller=b.scroller,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop,this.onBottom=b.onBottom,this.onNotBottom=b.onNotBottom}var f={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,a.prototype={constructor:a,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},e.prototype={constructor:e,init:function(){if(e.cutsTheMustard)return this.debouncer=new a(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var a=this.classes;this.initialised=!1;for(var b in a)a.hasOwnProperty(b)&&this.elem.classList.remove(a[b]);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;!a.contains(b.pinned)&&a.contains(b.unpinned)||(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var a=this.elem.classList,b=this.classes;a.contains(b.bottom)||(a.add(b.bottom),a.remove(b.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notBottom)||(a.add(b.notBottom),a.remove(b.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(a){return Math.max(a.offsetHeight,a.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,b.scrollHeight,a.offsetHeight,b.offsetHeight,a.clientHeight,b.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(a){var b=a<0,c=a+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),a+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},e.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},e.cutsTheMustard="undefined"!=typeof f&&f.rAF&&f.bind&&f.classList,e});


/*!
 * jQuery headroom
 */ 
(function($){if(!$){return}$.fn.headroom=function(option){return this.each(function(){var $this=$(this),data=$this.data('headroom'),options=typeof option==='object'&&option;options=$.extend(true,{},Headroom.options,options);if(!data){data=new Headroom(this,options);data.init();$this.data('headroom',data)}if(typeof option==='string'){data[option]();if(option==='destroy'){$this.removeData('headroom')}}})};$('[data-headroom]').each(function(){var $this=$(this);$this.headroom($this.data())})}(window.Zepto||window.jQuery));


/*!
 * clipboard.js v2.0.0
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var o,r,i;!function(a,c){r=[t,n(7)],o=c,void 0!==(i="function"==typeof o?o.apply(e,r):o)&&(t.exports=i)}(0,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(t){return t&&t.__esModule?t:{default:t}}(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return i(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!c.string(e))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(t))return r(t,e,n);if(c.nodeList(t))return i(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function i(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return u(document.body,t,e,n)}var c=n(6),u=n(5);t.exports=o},function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){r.off(t,o),e.apply(n,arguments)}var r=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;for(o;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){var o,r,i;!function(a,c){r=[t,n(0),n(2),n(1)],o=c,void 0!==(i="function"==typeof o?o.apply(e,r):o)&&(t.exports=i)}(0,function(t,e,n,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var l=r(e),s=r(n),f=r(o),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){i(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return c(e,t),h(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,f.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return u("action",t)}},{key:"defaultTarget",value:function(t){var e=u("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return u("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(s.default);t.exports=p})},function(t,e){function n(t,e){for(;t&&t.nodeType!==o;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var o=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=n},function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function r(t,e,n,r,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return o(t,e,n,r,i)}))}function i(t,e,n,o){return function(n){n.delegateTarget=a(n.target,e),n.delegateTarget&&o.call(t,n)}}var a=n(4);t.exports=r},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){function n(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(t),o.removeAllRanges(),o.addRange(r),e=o.toString()}return e}t.exports=n}])});


/*!
 * jquery.pjax.min.js
 * Copyright 2012, Chris Wanstrath
 * Released under the MIT License
 * https://github.com/defunkt/jquery-pjax
 */
!function(t){function e(e,a,r){return r=m(a,r),this.on("click.pjax",e,function(e){var a=r;a.container||(a=t.extend({},r),a.container=t(this).attr("data-pjax")),n(e,a)})}function n(e,n,a){a=m(n,a);var i=e.currentTarget,o=t(i);if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==i.protocol||location.hostname!==i.hostname||i.href.indexOf("#")>-1&&h(i)==h(location)||e.isDefaultPrevented())){var c={url:i.href,container:o.attr("data-pjax"),target:i},s=t.extend({},c,a),u=t.Event("pjax:click");o.trigger(u,[s]),u.isDefaultPrevented()||(r(s),e.preventDefault(),o.trigger("pjax:clicked",[s]))}}function a(e,n,a){a=m(n,a);var i=e.currentTarget,o=t(i);if("FORM"!==i.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var c={type:(o.attr("method")||"GET").toUpperCase(),url:o.attr("action"),container:o.attr("data-pjax"),target:i};if("GET"!==c.type&&void 0!==window.FormData)c.data=new FormData(i),c.processData=!1,c.contentType=!1;else{if(o.find(":file").length)return;c.data=o.serializeArray()}r(t.extend({},c,a)),e.preventDefault()}function r(e){function n(n,a,r){r||(r={}),r.relatedTarget=e.target;var i=t.Event(n,r);return c.trigger(i,a),!i.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,r.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var a=f(e.url).hash,i=t.type(e.container);if("string"!==i)throw"expected string value for 'container' option; got "+i;var c=e.context=t(e.container);if(!c.length)throw"the container selector '"+e.container+"' did not match anything";e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:e.container}):e.data._pjax=e.container;var s;e.beforeSend=function(t,r){if("GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",e.container),!n("pjax:beforeSend",[t,r]))return!1;r.timeout>0&&(s=setTimeout(function(){n("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0);var i=f(r.url);a&&(i.hash=a),e.requestUrl=d(i)},e.complete=function(t,a){s&&clearTimeout(s),n("pjax:complete",[t,a,e]),n("pjax:end",[t,e])},e.error=function(t,a,r){var i=g("",t,e),c=n("pjax:error",[t,a,r,e]);"GET"==e.type&&"abort"!==a&&c&&o(i.url)},e.success=function(i,s,u){var p=r.state,d="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,h=u.getResponseHeader("X-PJAX-Version"),m=g(i,u,e),v=f(m.url);if(a&&(v.hash=a,m.url=v.href),d&&h&&d!==h)return void o(m.url);if(!m.contents)return void o(m.url);r.state={id:e.id||l(),url:m.url,title:m.title,container:e.container,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(r.state,m.title,m.url);var x=t.contains(c,document.activeElement);if(x)try{document.activeElement.blur()}catch(t){}m.title&&(document.title=m.title),n("pjax:beforeReplace",[m.contents,e],{state:r.state,previousState:p}),c.html(m.contents);var j=c.find("input[autofocus], textarea[autofocus]").last()[0];j&&document.activeElement!==j&&j.focus(),y(m.scripts);var w=e.scrollTo;if(a){var b=decodeURIComponent(a.slice(1)),T=document.getElementById(b)||document.getElementsByName(b)[0];T&&(w=t(T).offset().top)}"number"==typeof w&&t(window).scrollTop(w),n("pjax:success",[i,s,u,e])},r.state||(r.state={id:l(),url:window.location.href,title:document.title,container:e.container,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(r.state,document.title)),u(r.xhr),r.options=e;var h=r.xhr=t.ajax(e);return h.readyState>0&&(e.push&&!e.replace&&(j(r.state.id,[e.container,p(c)]),window.history.pushState(null,"",e.requestUrl)),n("pjax:start",[h,e]),n("pjax:send",[h,e])),r.xhr}function i(e,n){var a={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(t.extend(a,m(e,n)))}function o(t){window.history.replaceState(null,"",r.state.url),window.location.replace(t)}function c(e){P||u(r.xhr);var n,a=r.state,i=e.state;if(i&&i.container){if(P&&C==i.url)return;if(a){if(a.id===i.id)return;n=a.id<i.id?"forward":"back"}var c=D[i.id]||[],s=c[0]||i.container,l=t(s),d=c[1];if(l.length){a&&w(n,a.id,[s,p(l)]);var f=t.Event("pjax:popstate",{state:i,direction:n});l.trigger(f);var h={id:i.id,url:i.url,container:s,push:!1,fragment:i.fragment,timeout:i.timeout,scrollTo:!1};if(d){l.trigger("pjax:start",[null,h]),r.state=i,i.title&&(document.title=i.title);var m=t.Event("pjax:beforeReplace",{state:i,previousState:a});l.trigger(m,[d,h]),l.html(d),l.trigger("pjax:end",[null,h])}else r(h);l[0].offsetHeight}else o(location.href)}P=!1}function s(e){var n=t.isFunction(e.url)?e.url():e.url,a=e.type?e.type.toUpperCase():"GET",r=t("<form>",{method:"GET"===a?"GET":"POST",action:n,style:"display:none"});"GET"!==a&&"POST"!==a&&r.append(t("<input>",{type:"hidden",name:"_method",value:a.toLowerCase()}));var i=e.data;if("string"==typeof i)t.each(i.split("&"),function(e,n){var a=n.split("=");r.append(t("<input>",{type:"hidden",name:a[0],value:a[1]}))});else if(t.isArray(i))t.each(i,function(e,n){r.append(t("<input>",{type:"hidden",name:n.name,value:n.value}))});else if("object"==typeof i){var o;for(o in i)r.append(t("<input>",{type:"hidden",name:o,value:i[o]}))}t(document.body).append(r),r.submit()}function u(e){e&&e.readyState<4&&(e.onreadystatechange=t.noop,e.abort())}function l(){return(new Date).getTime()}function p(e){var n=e.clone();return n.find("script").each(function(){this.src||t._data(this,"globalEval",!1)}),n.contents()}function d(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function f(t){var e=document.createElement("a");return e.href=t,e}function h(t){return t.href.replace(/#.*/,"")}function m(e,n){return e&&n?(n=t.extend({},n),n.container=e,n):t.isPlainObject(e)?e:{container:e}}function v(t,e){return t.filter(e).add(t.find(e))}function x(e){return t.parseHTML(e,document,!0)}function g(e,n,a){var r={},i=/<html/i.test(e),o=n.getResponseHeader("X-PJAX-URL");r.url=o?d(f(o)):a.requestUrl;var c,s;if(i){s=t(x(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var u=e.match(/<head[^>]*>([\s\S.]*)<\/head>/i);c=null!=u?t(x(u[0])):s}else c=s=t(x(e));if(0===s.length)return r;if(r.title=v(c,"title").last().text(),a.fragment){var l=s;"body"!==a.fragment&&(l=v(l,a.fragment).first()),l.length&&(r.contents="body"===a.fragment?l:l.contents(),r.title||(r.title=l.attr("title")||l.data("title")))}else i||(r.contents=s);return r.contents&&(r.contents=r.contents.not(function(){return t(this).is("title")}),r.contents.find("title").remove(),r.scripts=v(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=t.trim(r.title)),r}function y(e){if(e){var n=t("script[src]");e.each(function(){var e=this.src,a=n.filter(function(){return this.src===e});if(!a.length){var r=document.createElement("script"),i=t(this).attr("type");i&&(r.type=i),r.src=t(this).attr("src"),document.head.appendChild(r)}})}}function j(t,e){D[t]=e,U.push(t),b(R,0),b(U,r.defaults.maxCacheLength)}function w(t,e,n){var a,i;D[e]=n,"forward"===t?(a=U,i=R):(a=R,i=U),a.push(e),e=i.pop(),e&&delete D[e],b(a,r.defaults.maxCacheLength)}function b(t,e){for(;t.length>e;)delete D[t.shift()]}function T(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function E(){t.fn.pjax=e,t.pjax=r,t.pjax.enable=t.noop,t.pjax.disable=S,t.pjax.click=n,t.pjax.submit=a,t.pjax.reload=i,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:T},t(window).on("popstate.pjax",c)}function S(){t.fn.pjax=function(){return this},t.pjax=s,t.pjax.enable=E,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",c)}var P=!0,C=window.location.href,A=window.history.state;A&&A.container&&(r.state=A),"state"in window.history&&(P=!1);var D={},R=[],U=[];t.event.props&&t.inArray("state",t.event.props)<0?t.event.props.push("state"):"state"in t.Event.prototype||t.event.addProp("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?E():S()}(jQuery);


/*!
 * menu
 */
(function(a){var k=function(){var h=function(b,c){this.$element=a(b);if(960>(window.innerWidth||document.documentElement.clientWidth))return!1;this.settings=a.extend({},a.fn.autoMenu.defaults,"object"===typeof c&&c);this.init()};h.prototype={init:function(){this.$element.html(this.createHtml());this.setActive();this.bindEvent()},createHtml:function(){var b=this,c=b.settings,d="<ul>",g=1;a("*").each(function(){var f=a(this),e="";switch(f.get(0).tagName){case c.levelOne.toUpperCase():e="menu-level-one";
break;case c.levelTwo.toUpperCase():e="menu-level-two"}e&&(f.attr("id","title-"+g),f=b.handleTxt(f.html()),d+='<li class="menu-level-item '+e+'" name="title-'+g+'"><a href="#title-'+g+'" title="'+f+'" class="anim-trans">'+f+"</a></li>",g++)});d+="</ul>";3>g&&(d="");return d},handleTxt:function(a){return a.replace(/<\/?[^>]+>/g,"").trim()},setActive:function(){var b=this.$element,c=this.settings,d=a(c.levelOne+","+c.levelTwo),g=c.offTop,f=a(document).scrollTop(),e;try{if(a(document).scrollTop()<a(".entry-content").offset().top||
a(document).scrollTop()>a(".social-main").offset().top){b.find("ul").fadeOut();a("#article-share").fadeOut();return}b.find("ul").fadeIn();a("#article-share").fadeIn()}catch(l){return}d.each(function(){var b=a(this),c=b.offset().top;if(f>c-g)e=b.attr("id");else return!1});c=b.find(".active");e&&c.attr("name")!=e&&(c.removeClass("active"),b.find("[name="+e+"]").addClass("active"))},bindEvent:function(){var b=this;a(window).scroll(function(){b.setActive()});b.$element.on("click",".btn-box",function(){a(this).find("span").hasClass("icon-minus-sign")?
(a(this).find("span").removeClass("icon-minus-sign").addClass("icon-plus-sign"),b.$element.find("ul").fadeOut()):(a(this).find("span").removeClass("icon-plus-sign").addClass("icon-minus-sign"),b.$element.find("ul").fadeIn())});b.$element.on("click",".menu-level-item",function(){var b=a(this).attr("name");a("html, body").stop().animate({scrollTop:a("#"+b).offset().top},800,function(){window.location.hash=b});return!1})}};return h}();a.fn.autoMenu=function(h){return this.each(function(){var b=a(this),
c=b.data("autoMenu"),d=a.extend({},a.fn.autoMenu.defaults,"object"===typeof h&&h);c||b.data("autoMenu",new k(this,d));if("string"===a.type(h))c[d]()})};a.fn.autoMenu.defaults={levelOne:"h2",levelTwo:"h3",offTop:100};a(function(){0<a("[data-autoMenu]").length&&new k(a("[data-autoMenu]"))})})(jQuery);


/*!
 * emoji
 */ 
var emojiLists=[{name:"\u963f\u9c81",path:"aru/",maxNum:164,excludeNums:[],file:".png",placeholder:"[aru_{alias}]"},{name:"QQ",path:"qq/",file:".gif",placeholder:"[{alias}]",emoji:{doge:"doge","\u659c\u773c\u7b11":"xieyanxiao","\u6258\u816e":"tuosai","\u5c0f\u7ea0\u7ed3":"xiaojiujie","\u7b11\u54ed":"xiaoku","\u55b7\u8840":"penxue","\u5fae\u7b11":"weixiao","\u6487\u5634":"piezui","\u8272":"se","\u53d1\u5446":"fadai","\u5f97\u610f":"deyi","\u6d41\u6cea":"liulei","\u5bb3\u7f9e":"haixiu","\u95ed\u5634":"bizui",
"\u7761":"shui","\u5927\u54ed":"daku","\u5c34\u5c2c":"ganga","\u5472\u7259":"ziya","\u53d1\u6012":"fanu","\u8c03\u76ae":"tiaopi","\u60ca\u8bb6":"jingya","\u96be\u8fc7":"nanguo","\u9177":"ku","\u51b7\u6c57":"lenhan","\u6293\u72c2":"zhuakuang","\u5410":"tu","\u5077\u7b11":"touxiao","\u53ef\u7231":"keai","\u767d\u773c":"baiyan","\u50b2\u6162":"aoman","\u9965\u997f":"jie","\u56f0":"kun","\u60ca\u6050":"jingkong","\u6d41\u6c57":"liuhan","\u61a8\u7b11":"hanxiao","\u5927\u5175":"dabing","\u594b\u6597":"fendou",
"\u5492\u9a82":"zhouma","\u7591\u95ee":"yiwen","\u5618":"xu","\u6655":"yun","\u6298\u78e8":"zhemo","\u8870":"fade","\u9ab7\u9ac5":"kulou","\u6572\u6253":"qiaoda","\u518d\u89c1":"zaijian","\u64e6\u6c57":"cahan","\u62a0\u9f3b":"koubi","\u9f13\u638c":"guzhang","\u55c5\u5927\u4e86":"qiudale","\u574f\u7b11":"huaixiao","\u5de6\u54fc\u54fc":"zuohengheng","\u53f3\u54fc\u54fc":"youhengheng","\u54c8\u6b20":"haqian","\u9119\u89c6":"bishi","\u59d4\u5c48":"weiqu","\u53ef\u601c":"kelian","\u9634\u9669":"yinxian",
"\u4eb2\u4eb2":"qinqin","\u5413":"xia","\u5feb\u54ed\u4e86":"kuaikule","\u83dc\u5200":"caidao","\u897f\u74dc":"xigua","\u5564\u9152":"pijiu","\u7bee\u7403":"lanqiu","\u4e52\u4e53":"pingpong","\u5496\u5561":"kafei","\u996d":"fan","\u732a\u5934":"zhutou","\u73ab\u7470":"meigui","\u51cb\u8c22":"diaoxie","\u5fc3":"xin","\u5fc3\u788e":"xinsui","\u86cb\u7cd5":"dangao","\u95ea\u7535":"shandian","\u70b8\u5f39":"zhadan","\u5200":"dao","\u8db3\u7403":"zuqiu","\u74e2\u866b":"piaochong","\u4fbf\u4fbf":"bianbian",
"\u591c\u665a":"yewan","\u592a\u9633":"taiyang","\u793c\u7269":"liwu","\u62e5\u62b1":"yongbao","\u5f3a":"qiang","\u5f31":"ruo","\u63e1\u624b":"woshou","\u80dc\u5229":"shengli","\u62b1\u62f3":"baoquan","\u52fe\u5f15":"gouyin","\u62f3\u5934":"quantou","\u5dee\u52b2":"chajin","\u7231\u4f60":"aini",NO:"NO",OK:"OK","\u7231\u60c5":"aiqing","\u98de\u543b":"feiwen","\u53d1\u8d22":"facai","\u5e05":"shuai","\u96e8\u4f1e":"yusan","\u9ad8\u94c1\u5de6\u8f66\u5934":"gaotiezuochetou","\u8f66\u53a2":"chexiang","\u9ad8\u94c1\u53f3\u8f66\u5934":"gaotieyouchetou",
"\u7eb8\u5dfe":"zhijin","\u53f3\u592a\u6781":"youtaiji","\u5de6\u592a\u6781":"zuotaiji","\u732e\u543b":"xianwen","\u8857\u821e":"jiewu","\u6fc0\u52a8":"jidong","\u6325\u52a8":"huidong","\u8df3\u7ef3":"tiaosheng","\u56de\u5934":"huitou","\u78d5\u5934":"ketou","\u8f6c\u5708":"zhuanquan","\u6004\u706b":"ouhuo","\u53d1\u6296":"fadou","\u8df3\u8df3":"tiaotiao","\u7206\u7b4b":"baojin","\u6c99\u53d1":"shafa","\u94b1":"qian","\u8721\u70db":"lazhu","\u67aa":"gun","\u706f":"deng","\u9999\u8549":"xiangjiao",
"\u543b":"wen","\u4e0b\u96e8":"xiayu","\u95f9\u949f":"naozhong","\u56cd":"xi","\u68d2\u68d2\u7cd6":"bangbangtang","\u9762\u6761":"miantiao","\u8f66":"che","\u90ae\u4ef6":"youjian","\u98ce\u8f66":"fengche","\u836f\u4e38":"yaowan","\u5976\u74f6":"naiping","\u706f\u7b3c":"denglong","\u9752\u86d9":"qingwa","\u6212\u6307":"jiezhi","K\u6b4c":"Kge","\u718a\u732b":"xiongmao","\u559d\u5f69":"hecai","\u8d2d\u7269":"gouwu","\u591a\u4e91":"duoyun","\u97ad\u70ae":"bianpao","\u98de\u673a":"feiji","\u6c14\u7403":"qiqiu"}},
{name:"\u5fae\u535a",path:"weibo/",file:".png",placeholder:"[wb_{alias}]",emoji:{doge:"doge",miao:"miao",dog1:"dog1","\u4e8c\u54c8":"erha",dog2:"dog2",dog3:"dog3",dog4:"dog4",dog5:"dog5",dog6:"dog6",dog7:"dog7",dog8:"dog8",dog9:"dog9",dog10:"dog10",dog11:"dog11",dog12:"dog12",dog13:"dog13",dog14:"dog14",dog15:"dog15","\u5e76\u4e0d\u7b80\u5355":"bingbujiandan","\u5141\u60b2":"yunbei","\u5403\u74dc":"chigua","\u8d39\u89e3":"feijie","\u7b11\u800c\u4e0d\u8bed":"xiaoerbuyu","\u61a7\u61ac":"chongjing",
"\u8214\u5c4f":"tianping","\u6c61":"wu","\u8dea\u4e86":"guile","\u62b1\u62b1":"baobao","\u644a\u624b":"tanshou","\u7231\u4f60":"aini","\u5965\u7279\u66fc":"aoteman","\u62dc\u62dc":"baibai","\u60b2\u4f24":"beishang","\u9119\u89c6":"bishi","\u95ed\u5634":"bizui","\u998b\u5634":"chanzui","\u5403\u60ca":"chijing","\u6253\u54c8\u6c14":"dahaqi","\u6253\u8138":"dalian","\u9876":"ding","\u80a5\u7682":"feizao","\u611f\u5192":"ganmao","\u9f13\u638c":"guzhang","\u54c8\u54c8":"haha","\u5bb3\u7f9e":"haixiu","\u5475\u5475":"hehe",
"\u9ed1\u7ebf":"heixian","\u54fc":"heng","\u82b1\u5fc3":"huaxin","\u6324\u773c":"jiyan","\u53ef\u7231":"keai","\u53ef\u601c":"kelian","\u9177":"ku","\u56f0":"kun","\u61d2\u5f97\u7406\u4f60":"landelini","\u6cea":"lei","\u7537\u5b69\u513f":"nanhaier","\u6012":"nu","\u6012\u9a82":"numa","\u5973\u5b69\u513f":"nvhaier","\u94b1":"qian","\u4eb2\u4eb2":"qinqin","\u50bb\u773c":"shayan","\u751f\u75c5":"shengbing","\u795e\u517d":"shenshou","\u5931\u671b":"shiwang","\u8870":"shuai","\u7761\u89c9":"shuijiao",
"\u601d\u8003":"sikao","\u592a\u5f00\u5fc3":"taikaixin","\u5077\u7b11":"touxiao","\u5410":"tu","\u5154\u5b50":"tuzi","\u6316\u9f3b\u5c4e":"wabishi","\u59d4\u5c48":"weiqu","\u7b11\u54ed":"xiaoku","\u718a\u732b":"xiongmao","\u563b\u563b":"xixi","\u5618":"xu","\u9634\u9669":"yinxian","\u7591\u95ee":"yiwen","\u53f3\u54fc\u54fc":"youhengheng","\u6655":"yun","\u6293\u72c2":"zhuakuang","\u732a\u5934":"zhutou","\u6700\u53f3":"zuiyou","\u5de6\u54fc\u54fc":"zuohengheng","\u7ed9\u529b":"geili","\u4e92\u7c89":"hufen",
"\u56e7":"jiong","\u840c":"meng","\u795e\u9a6c":"shenma",v5:"v5","\u56cd":"xi","\u7ec7":"zhi"}},{name:"\u8d34\u5427",path:"newtieba/",file:".png",placeholder:"#({alias})",emoji:{"\u5475\u5475":"hehe","\u54c8\u54c8":"hahaxiao","\u5410\u820c":"tushe","\u592a\u5f00\u5fc3":"taikaixin","\u7b11\u773c":"xiaoyan","\u82b1\u5fc3":"huaxin","\u5c0f\u4e56":"xiaoguai","\u4e56":"guai","\u6342\u5634\u7b11":"wuzuixiao","\u6ed1\u7a3d":"huaji","\u4f60\u61c2\u7684":"nidongde","\u4e0d\u9ad8\u5174":"bugaoxing","\u6012":"nu",
"\u6c57":"han","\u9ed1\u7ebf":"heixian","\u6cea":"lei","\u771f\u68d2":"zhenbang","\u55b7":"pen","\u60ca\u54ed":"jingku","\u9634\u9669":"yinxian","\u9119\u89c6":"bishi","\u9177":"ku","\u554a":"a","\u72c2\u6c57":"kuanghan",what:"what","\u7591\u95ee":"yiwen","\u9178\u723d":"suanshuang","\u5440\u54a9\u7239":"yamiedie","\u59d4\u5c48":"weiqu","\u60ca\u8bb6":"jingya","\u7761\u89c9":"shuijiao","\u7b11\u5c3f":"xiaoniao","\u6316\u9f3b":"wabi","\u5410":"tu","\u7280\u5229":"xili","\u5c0f\u7ea2\u8138":"xiaohonglian",
"\u61d2\u5f97\u7406":"landeli","\u52c9\u5f3a":"mianqiang","\u7231\u5fc3":"aixin","\u5fc3\u788e":"xinsui","\u73ab\u7470":"meigui","\u793c\u7269":"liwu","\u5f69\u8679":"caihong","\u592a\u9633":"taiyang","\u661f\u661f\u6708\u4eae":"xingxingyueliang","\u94b1\u5e01":"qianbi","\u8336\u676f":"chabei","\u86cb\u7cd5":"dangao","\u5927\u62c7\u6307":"damuzhi","\u80dc\u5229":"shengli",haha:"haha",OK:"OK","\u6c99\u53d1":"shafa","\u624b\u7eb8":"shouzhi","\u9999\u8549":"xiangjiao","\u4fbf\u4fbf":"bianbian","\u836f\u4e38":"yaowan",
"\u7ea2\u9886\u5dfe":"honglingjin","\u8721\u70db":"lazhu","\u97f3\u4e50":"yinyue","\u706f\u6ce1":"dengpao"}},{name:"\u65e7\u8d34\u5427",path:"tieba/",file:".png",placeholder:"#[{alias}]",emoji:{"\u5475\u5475":"hehe","\u54c8\u54c8":"hahaxiao","\u5410\u820c":"tushe","\u554a":"a","\u9177":"ku","\u6012":"nu","\u5f00\u5fc3":"kaixin","\u6c57":"han","\u6cea":"lei","\u9ed1\u7ebf":"heixian","\u9119\u89c6":"bishi","\u4e0d\u9ad8\u5174":"bugaoxing","\u771f\u68d2":"zhenbang","\u94b1":"qian","\u7591\u95ee":"yiwen",
"\u9634\u9669":"yinxian","\u5410":"tu","\u54a6":"yi","\u59d4\u5c48":"weiqu","\u82b1\u5fc3":"huaxin","\u547c":"hu","\u7b11\u773c":"xiaoyan","\u51b7":"len","\u592a\u5f00\u5fc3":"taikaixin","\u6ed1\u7a3d":"huaji","\u52c9\u5f3a":"mianqiang","\u72c2\u6c57":"kuanghan","\u4e56":"guai","\u7761\u89c9":"shuijiao","\u60ca\u54ed":"jingku","\u751f\u6c14":"shengqi","\u60ca\u8bb6":"jingya","\u55b7":"pen","\u73ab\u7470":"meigui","\u793c\u7269":"liwu","\u5f69\u8679":"caihong","\u94b1\u5e01":"qianbi","\u706f\u6ce1":"dengpao",
"\u8336\u676f":"chabei","\u97f3\u4e50":"yinyue",haha:"haha","\u80dc\u5229":"shengli","\u5927\u62c7\u6307":"damuzhi","\u5f31":"ruo"}}];


/*!
 * jQuery emoji
 * https://github.com/mengkunsoft/jQuery-emoji
 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,i){function o(t,i){switch(this.$content=e(t),this.options=i,this.index=emoji_index,i.animation){case"none":this.showFunc="show",this.hideFunc="hide",this.toggleFunc="toggle";break;case"slide":this.showFunc="slideDown",this.hideFunc="slideUp",this.toggleFunc="slideToggle";break;case"fade":default:this.showFunc="fadeIn",this.hideFunc="fadeOut",this.toggleFunc="fadeToggle"}this._init()}function n(t){return emoji_index++,this.each(function(){var i=e(this),n=i.data("plugin_"+s+emoji_index),r=e.extend({},a,i.data(),"object"===(void 0===t?"undefined":_typeof(t))&&t);n||i.data("plugin_"+s+emoji_index,n=new o(this,r)),"string"==typeof t&&n[t]()})}var s="emoji",a={showTab:!0,animation:"fade",icons:[]};t.emoji_index=0,o.prototype={_init:function(){var t,o,n,s=this,a=this.options.button,r=s.index;a||(t='<input type="image" class="emoji_btn" id="emoji_btn_'+r+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZBAMAAAA2x5hQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUxpcfTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAOfx6yUAAAALdFJOUwAzbVQOoYrzwdwkAoU+0gAAAM1JREFUGNN9kK0PQWEUxl8fM24iCYopwi0muuVuzGyKwATFZpJIU01RUG/RBMnHxfz+Oef9uNM84d1+23nO+zxHKVG2WWupRJkdcAwtpCK0lpbqWE01pB0QayonREMoIp7AawQrWSgGGb4pn6dSeSh68FAVXqHqy3wKrkJiDGDTg3dnp//w+WnwlwIOJauF+C7sXRVfdha4O4oIJfTbtdSxs2uqhs585A0ko8iLTMEcDE1n65A+29pYAlr72nz9dKu7GuNTcsL2fDQzB/wCPVJ69nZGb3gAAAAASUVORK5CYII="/>',o=this.$content.offset().top+this.$content.outerHeight()+10,n=this.$content.offset().left+2,e(t).appendTo(e("body")),e("#emoji_btn_"+r).css({top:o+"px",left:n+"px"}),a="#emoji_btn_"+r);var c=this.options.showTab,l=this.options.basePath,d=this.options.icons,f=d.length;if(0===f)return console.error("表情图路径读取失败"),!1;for(var m,p,u,_,h,g,j,A,v,w,b='<div class="emoji_container" id="emoji_container_'+r+'">',x='<div class="emoji_content">',y='<div class="emoji_tab" style="'+(1!==f||c?"":"display:none;")+'"><div class="emoji_tab_prev"></div><div class="emoji_tab_list"><ul>',T=0;T<f;T++)if(p=d[T].name||"group"+(T+1),u=l+"/"+d[T].path,_=d[T].maxNum,h=d[T].excludeNums,g=d[T].file||".jpg",j=d[T].placeholder||"#em"+(T+1)+"_{alias}#",A=d[T].emoji,v=0,u){if(m='<div id="emoji'+T+'" class="emoji_icons" style="'+(0===T?"":"display:none;")+'"><ul>',A){if("object"!==(void 0===A?"undefined":_typeof(A))){console.error("第 "+T+" 组 emoji 参数设置不正确");continue}_=_||A.length;for(var R in A)++v>_||h&&h.indexOf(v)>=0||(w=j.replace(new RegExp("{alias}","gi"),R.toString()),m+='<li><a data-emoji_code="'+w+'" data-index="'+v+'" title="'+R+'"><img src="'+u+A[R]+g+'"/></a></li>')}else{if(!_){console.error("请指定第 "+T+" 组表情的 maxNum 或 emoji 参数");continue}for(var S=1;S<=_;S++)h&&h.indexOf(S)>=0||(w=j.replace(new RegExp("{alias}","gi"),S.toString()),m+='<li><a data-emoji_code="'+w+'" data-index="'+S+'"><img src="'+u+S+g+'"/></a></li>')}m+="</ul></div>",x+=m,y+='<li data-emoji_tab="emoji'+T+'" class="'+(0===T?"selected":"")+'" title="'+p+'">'+p+"</li>"}else console.error("第 "+T+" 组表情未配置图片路径 path");x+="</div>",y+='</ul></div><div class="emoji_tab_next"></div></div>';b+=x,b+=y,b+='<div class="emoji_preview"><img/></div>',e(b).appendTo(e("body"));var C=f%8==0?parseInt(f/8):parseInt(f/8)+1,G=1;e(i).on({click:function(t){var i,o,n,c,l=t.target,d=s.$content[0];if(l===e(a)[0]){var f=e(a).offset().top+e(a).outerHeight()+5,m=e(a).offset().left;e("#emoji_container_"+r).css({top:f+"px",left:m+"px"}),e("#emoji_container_"+r)[s.toggleFunc]()}else e(l).parents("#emoji_container_"+r).length>0?(i=e(l).data("emoji_code")||e(l).parent().data("emoji_code"),o=e(l).data("emoji_tab"),i?("DIV"===d.nodeName?(n=e("#emoji_container_"+r+' a[data-emoji_code="'+i+'"] img').attr("src"),c='<img class="emoji_icon" src="'+n+'"/>',s._insertAtCursor(d,c,!1)):s._insertAtCursor(d,i),s.hide(),s.$content.focus()):o?e(l).hasClass("selected")||(e("#emoji_container_"+r+" .emoji_icons").hide(),e("#emoji_container_"+r+" #"+o).show(),e(l).addClass("selected").siblings().removeClass("selected")):e(l).hasClass("emoji_tab_prev")?G>1&&(e("#emoji_container_"+r+" .emoji_tab_list ul").css("margin-left","-503"*(G-2)+"px"),G--):e(l).hasClass("emoji_tab_next")&&G<C&&(e("#emoji_container_"+r+" .emoji_tab_list ul").css("margin-left","-503"*G+"px"),G++)):e("#emoji_container_"+r+":visible").length>0&&(s.hide(),s.$content.focus())}}),e("#emoji_container_"+r+" .emoji_icons a").mouseenter(function(){2*(e(this).offset().left-e("#emoji_container_"+r).offset().left)<e("#emoji_container_"+r).width()?e("#emoji_container_"+r+" .emoji_preview").css({left:"auto",right:0}):e("#emoji_container_"+r+" .emoji_preview").css({left:0,right:"auto"});var t=e(this).find("img").attr("src");e("#emoji_container_"+r+" .emoji_preview img").attr("src",t).parent().show()}),e("#emoji_container_"+r+" .emoji_icons a").mouseleave(function(){e("#emoji_container_"+r+" .emoji_preview img").removeAttr("src").parent().hide()})},_insertAtCursor:function(e,o,n){var s,a;if("DIV"===e.nodeName){if(e.focus(),t.getSelection){if(s=t.getSelection(),s.getRangeAt&&s.rangeCount){a=s.getRangeAt(0),a.deleteContents();var r=i.createElement("div");r.innerHTML=o;for(var c,l,d=i.createDocumentFragment();c=r.firstChild;)l=d.appendChild(c);var f=d.firstChild;a.insertNode(d),l&&(a=a.cloneRange(),a.setStartAfter(l),n?a.setStartBefore(f):a.collapse(!0),s.removeAllRanges(),s.addRange(a))}}else if((s=i.selection)&&"Control"!==s.type){var m=s.createRange();m.collapse(!0),s.createRange().pasteHTML(html),n&&(a=s.createRange(),a.setEndPoint("StartToStart",m),a.select())}}else if(i.selection)e.focus(),s=i.selection.createRange(),s.text=o,s.select();else if(e.selectionStart||0===e.selectionStart){var p=e.selectionStart,u=e.selectionEnd,_=e.scrollTop;e.value=e.value.substring(0,p)+o+e.value.substring(u,e.value.length),_>0&&(e.scrollTop=_),e.focus(),e.selectionStart=p+o.length,e.selectionEnd=p+o.length}else e.value+=o,e.focus()},show:function(){e("#emoji_container_"+this.index)[this.showFunc]()},hide:function(){e("#emoji_container_"+this.index)[this.hideFunc]()},toggle:function(){e("#emoji_container_"+this.index)[this.toggleFunc]()}},e.fn[s]=n,e.fn[s].Constructor=o}(jQuery,window,document),function(e,t,i){function o(t,i){this.$content=e(t),this.options=i,this._init()}function n(t){return this.each(function(){var i=e(this),n=i.data("plugin_"+s),r=e.extend({},a,i.data(),"object"===(void 0===t?"undefined":_typeof(t))&&t);n||i.data("plugin_"+s,n=new o(this,r)),"string"==typeof t&&n[t]()})}var s="emojiParse",a={icons:[]};o.prototype={_init:function(){var e,t,i,o,n,s=this,a=this.$content[0].innerHTML,r=this.options.icons,c=this.options.basePath,l=r.length;if(!(l<=0)){for(var d=0;d<l;d++)if(e=c+"/"+r[d].path,t=r[d].file||".jpg",i=r[d].placeholder,i=i.replace("[","\\["),i=i.replace("]","\\]"),i=i.replace("(","\\("),i=i.replace(")","\\)"),e)if(o=r[d].emoji){if("object"!==(void 0===o?"undefined":_typeof(o))){console.error("第 "+d+" 组 emoji 参数设置不正确");continue}n=i.replace(new RegExp("{alias}","gi"),"([\\s\\S]+?)"),a=a.replace(new RegExp(n,"gm"),function(i,n){var s=o[n];return s?'<img class="wp-smiley" src="'+e+s+t+'" title="'+n+'" alt="'+n+'"/>':i})}else n=i.replace(new RegExp("{alias}","gi"),"(\\d+?)"),a=a.replace(new RegExp(n,"gm"),'<img class="wp-smiley" src="'+e+"$1"+t+'"/>');else console.error("第 "+d+" 组表情未配置图片路径 path");s.$content[0].innerHTML=a}}},e.fn[s]=n,e.fn[s].Constructor=o}(jQuery,window,document);


/*!
 * QR.js
 * https://github.com/lifthrasiir/qr.js/
 */ 
!function(r,n,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():r.QRCode=t()}(this,0,function(){for(var r=[null,[[10,7,17,13],[1,1,1,1],[]],[[16,10,28,22],[1,1,1,1],[4,16]],[[26,15,22,18],[1,1,2,2],[4,20]],[[18,20,16,26],[2,1,4,2],[4,24]],[[24,26,22,18],[2,1,4,4],[4,28]],[[16,18,28,24],[4,2,4,4],[4,32]],[[18,20,26,18],[4,2,5,6],[4,20,36]],[[22,24,26,22],[4,2,6,6],[4,22,40]],[[22,30,24,20],[5,2,8,8],[4,24,44]],[[26,18,28,24],[5,4,8,8],[4,26,48]],[[30,20,24,28],[5,4,11,8],[4,28,52]],[[22,24,28,26],[8,4,11,10],[4,30,56]],[[22,26,22,24],[9,4,16,12],[4,32,60]],[[24,30,24,20],[9,4,16,16],[4,24,44,64]],[[24,22,24,30],[10,6,18,12],[4,24,46,68]],[[28,24,30,24],[10,6,16,17],[4,24,48,72]],[[28,28,28,28],[11,6,19,16],[4,28,52,76]],[[26,30,28,28],[13,6,21,18],[4,28,54,80]],[[26,28,26,26],[14,7,25,21],[4,28,56,84]],[[26,28,28,30],[16,8,25,20],[4,32,60,88]],[[26,28,30,28],[17,8,25,23],[4,26,48,70,92]],[[28,28,24,30],[17,9,34,23],[4,24,48,72,96]],[[28,30,30,30],[18,9,30,25],[4,28,52,76,100]],[[28,30,30,30],[20,10,32,27],[4,26,52,78,104]],[[28,26,30,30],[21,12,35,29],[4,30,56,82,108]],[[28,28,30,28],[23,12,37,34],[4,28,56,84,112]],[[28,30,30,30],[25,12,40,34],[4,32,60,88,116]],[[28,30,30,30],[26,13,42,35],[4,24,48,72,96,120]],[[28,30,30,30],[28,14,45,38],[4,28,52,76,100,124]],[[28,30,30,30],[29,15,48,40],[4,24,50,76,102,128]],[[28,30,30,30],[31,16,51,43],[4,28,54,80,106,132]],[[28,30,30,30],[33,17,54,45],[4,32,58,84,110,136]],[[28,30,30,30],[35,18,57,48],[4,28,56,84,112,140]],[[28,30,30,30],[37,19,60,51],[4,32,60,88,116,144]],[[28,30,30,30],[38,19,63,53],[4,28,52,76,100,124,148]],[[28,30,30,30],[40,20,66,56],[4,22,48,74,100,126,152]],[[28,30,30,30],[43,21,70,59],[4,26,52,78,104,130,156]],[[28,30,30,30],[45,22,74,62],[4,30,56,82,108,134,160]],[[28,30,30,30],[47,24,77,65],[4,24,52,80,108,136,164]],[[28,30,30,30],[49,25,81,68],[4,28,56,84,112,140,168]]],n=/^\d*$/,t=/^[A-Za-z0-9 $%*+\-./:]*$/,e=/^[A-Z0-9 $%*+\-./:]*$/,o=[],a=[-1],u=0,f=1;u<255;++u)o.push(f),a[f]=u,f=2*f^(f>=128?285:0);var i=[[]];for(u=0;u<30;++u){for(var h=i[u],s=[],c=0;c<=u;++c){var l=c<u?o[h[c]]:0,v=o[(u+(h[c-1]||0))%255];s.push(a[l^v])}i.push(s)}var p={};for(u=0;u<45;++u)p["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".charAt(u)]=u;var g=[function(r,n){return(r+n)%2==0},function(r,n){return r%2==0},function(r,n){return n%3==0},function(r,n){return(r+n)%3==0},function(r,n){return((r/2|0)+(n/3|0))%2==0},function(r,n){return r*n%2+r*n%3==0},function(r,n){return(r*n%2+r*n%3)%2==0},function(r,n){return((r+n)%2+r*n%3)%2==0}],d=function(r){return r>6},m=function(n,t){var e=-8&function(n){var t=r[n],e=16*n*n+128*n+64;return d(n)&&(e-=36),t[2].length&&(e-=25*t[2].length*t[2].length-10*t[2].length-55),e}(n),o=r[n];return e-=8*o[0][t]*o[1][t]},w=function(r,n){switch(n){case 1:return r<10?10:r<27?12:14;case 2:return r<10?9:r<27?11:13;case 4:return r<10?8:16;case 8:return r<10?8:r<27?10:12}},C=function(r,n,t){var e=m(r,t)-4-w(r,n);switch(n){case 1:return 3*(e/10|0)+(e%10<4?0:e%10<7?1:2);case 2:return 2*(e/11|0)+(e%11<6?0:1);case 4:return e/8|0;case 8:return e/13|0}},A=function(r,n){for(var t=r.slice(0),e=r.length,u=n.length,f=0;f<u;++f)t.push(0);for(f=0;f<e;){var i=a[t[f++]];if(i>=0)for(var h=0;h<u;++h)t[f+h]^=o[(i+n[h])%255]}return t.slice(e)},x=function(r,n,t,e){for(var o=r<<e,a=n-1;a>=0;--a)o>>e+a&1&&(o^=t<<a);return r<<e|o},b=function(r,n,t){for(var e=g[t],o=r.length,a=0;a<o;++a)for(var u=0;u<o;++u)n[a][u]||(r[a][u]^=e(a,u));return r},y=function(r,n,t,e){for(var o=r.length,a=21522^x(t<<3|e,5,1335,10),u=0;u<15;++u){var f=[o-1,o-2,o-3,o-4,o-5,o-6,o-7,o-8,7,5,4,3,2,1,0][u];r[[0,1,2,3,4,5,7,8,o-7,o-6,o-5,o-4,o-3,o-2,o-1][u]][8]=r[8][f]=a>>u&1}return r},$=function(r){for(var n=function(r){for(var n=0,t=0;t<r.length;++t)r[t]>=5&&(n+=r[t]-5+3);for(t=5;t<r.length;t+=2){var e=r[t];r[t-1]==e&&r[t-2]==3*e&&r[t-3]==e&&r[t-4]==e&&(r[t-5]>=4*e||r[t+1]>=4*e)&&(n+=40)}return n},t=r.length,e=0,o=0,a=0;a<t;++a){var u,f=r[a];u=[0];for(var i=0;i<t;){for(h=0;i<t&&f[i];++h)++i;for(u.push(h),h=0;i<t&&!f[i];++h)++i;u.push(h)}e+=n(u),u=[0];for(i=0;i<t;){var h;for(h=0;i<t&&r[i][a];++h)++i;for(u.push(h),h=0;i<t&&!r[i][a];++h)++i;u.push(h)}e+=n(u);var s=r[a+1]||[];o+=f[0];for(i=1;i<t;++i){var c=f[i];o+=c,f[i-1]==c&&s[i]===c&&s[i-1]===c&&(e+=3)}}return e+=10*(Math.abs(o/t/t-.5)/.05|0)},k=function(n,t,e,o,a){var u=r[t],f=function(r,n,t,e){var o=[],a=0,u=8,f=t.length,i=function(r,n){if(n>=u){for(o.push(a|r>>(n-=u));n>=8;)o.push(r>>(n-=8)&255);a=0,u=8}n>0&&(a|=(r&(1<<n)-1)<<(u-=n))},h=w(r,n);switch(i(n,4),i(f,h),n){case 1:for(var s=2;s<f;s+=3)i(parseInt(t.substring(s-2,s+1),10),10);i(parseInt(t.substring(s-2),10),[0,4,7][f%3]);break;case 2:for(s=1;s<f;s+=2)i(45*p[t.charAt(s-1)]+p[t.charAt(s)],11);f%2==1&&i(p[t.charAt(s-1)],6);break;case 4:for(s=0;s<f;++s)i(t[s],8)}for(i(0,4),u<8&&o.push(a);o.length+1<e;)o.push(236,17);return o.length<e&&o.push(236),o}(t,e,n,m(t,o)>>3);f=function(r,n,t){for(var e=[],o=r.length/n|0,a=0,u=n-r.length%n,f=0;f<u;++f)e.push(a),a+=o;for(f=u;f<n;++f)e.push(a),a+=o+1;e.push(a);var i=[];for(f=0;f<n;++f)i.push(A(r.slice(e[f],e[f+1]),t));var h=[],s=r.length/n|0;for(f=0;f<s;++f)for(var c=0;c<n;++c)h.push(r[e[c]+f]);for(c=u;c<n;++c)h.push(r[e[c+1]-1]);for(f=0;f<t.length;++f)for(c=0;c<n;++c)h.push(i[c][f]);return h}(f,u[1][o],i[u[0][o]]);var h=function(n){for(var t=r[n],e=function(r){return 4*r+17}(n),o=[],a=[],u=0;u<e;++u)o.push([]),a.push([]);var f=function(r,n,t,e,u){for(var f=0;f<t;++f)for(var i=0;i<e;++i)o[r+f][n+i]=u[f]>>i&1,a[r+f][n+i]=1};f(0,0,9,9,[127,65,93,93,93,65,383,0,64]),f(e-8,0,8,9,[256,127,65,93,93,93,65,127]),f(0,e-8,9,8,[254,130,186,186,186,130,254,0,0]);for(u=9;u<e-8;++u)o[6][u]=o[u][6]=1&~u,a[6][u]=a[u][6]=1;var i=t[2],h=i.length;for(u=0;u<h;++u)for(var s=0==u?h-1:h,c=0==u||u==h-1?1:0;c<s;++c)f(i[u],i[c],5,5,[31,17,21,17,31]);if(d(n)){var l=x(n,6,7973,12),v=0;for(u=0;u<6;++u)for(c=0;c<3;++c)o[u][e-11+c]=o[e-11+c][u]=l>>v++&1,a[u][e-11+c]=a[e-11+c][u]=1}return{matrix:o,reserved:a}}(t),s=h.matrix,c=h.reserved;if(function(r,n,t){for(var e=r.length,o=0,a=-1,u=e-1;u>=0;u-=2){6==u&&--u;for(var f=a<0?e-1:0,i=0;i<e;++i){for(var h=u;h>u-2;--h)n[f][h]||(r[f][h]=t[o>>3]>>(7&~o)&1,++o);f+=a}a=-a}}(s,c,f),a<0){b(s,c,0),y(s,0,o,0);var l=0,v=$(s);for(b(s,c,0),a=1;a<8;++a){b(s,c,a),y(s,0,o,a);var g=$(s);v>g&&(v=g,l=a),b(s,c,a)}a=l}return b(s,c,a),y(s,0,o,a),s},L={generate:function(r,o){var a={numeric:1,alphanumeric:2,octet:4},u={L:1,M:0,Q:3,H:2},f=(o=o||{}).version||-1,i=u[(o.ecclevel||"L").toUpperCase()],h=o.mode?a[o.mode.toLowerCase()]:-1,s="mask"in o?o.mask:-1;if(h<0)h="string"==typeof r?r.match(n)?1:r.match(e)?2:4:4;else if(1!=h&&2!=h&&4!=h)throw"invalid or unsupported mode";if(null===(r=function(r,e){switch(r){case 1:return e.match(n)?e:null;case 2:return e.match(t)?e.toUpperCase():null;case 4:if("string"==typeof e){for(var o=[],a=0;a<e.length;++a){var u=e.charCodeAt(a);u<128?o.push(u):u<2048?o.push(192|u>>6,128|63&u):u<65536?o.push(224|u>>12,128|u>>6&63,128|63&u):o.push(240|u>>18,128|u>>12&63,128|u>>6&63,128|63&u)}return o}return e}}(h,r)))throw"invalid data format";if(i<0||i>3)throw"invalid ECC level";if(f<0){for(f=1;f<=40&&!(r.length<=C(f,h,i));++f);if(f>40)throw"too large data"}else if(f<1||f>40)throw"invalid version";if(-1!=s&&(s<0||s>8))throw"invalid mask";return k(r,f,h,i,s)},generatePNG:function(r,n){n=n||{};var t,e=L.generate(r,n),o=Math.max(n.modulesize||5,.5),a=Math.max(null!=n.margin?n.margin:0,0),u=e.length,f=o*(u+2*a),i=document.createElement("canvas");if(i.width=i.height=f,!(t=i.getContext("2d")))throw"canvas support is needed for PNG output";t.fillStyle="#fff",t.fillRect(0,0,f,f),t.fillStyle="#000";for(var h=0;h<u;++h)for(var s=0;s<u;++s)e[h][s]&&t.fillRect(o*(a+s),o*(a+h),o,o);return i.toDataURL()}};return L});


/*!
 * Ajax-Comment.js
 */
jQuery(document).ready(function($){$("#comment").bind("keydown",function(moz_ev){var ev=null;ev=window.event?window.event:moz_ev;if(ev!==null&&ev.ctrlKey&&ev.keyCode==13){$('#commentform #submit').click()}});$(document).on("submit","#commentform",function(){$('#commentform #submit').attr('disabled',true);showCommentMsg("让评论飞一会儿~","wait",false);$.ajax({url:mk_theme_api.ajax_url,data:$(this).serialize()+"&action=ajax_comment",type:$(this).attr('method'),complete:function(XMLHttpRequest,textStatus){setTimeout(function(){$('#comment-tips').stop().fadeOut();$('#commentform #submit').attr('disabled',false)},3000)},error:function(request){var errMsg=request.responseText;if(errMsg===undefined)errMsg="您的操作太频繁，请重试...";showCommentMsg(errMsg,"error",false)},success:function(data){if($("#comment_parent").val()<1){if(!$('#comments>.comment-list').length){$("#respond").after('<ol class="comment-list"></ol>')}$('#comments>.comment-list').prepend(data);$('html, body').animate({scrollTop:$('#comments>.comment-list').offset().top},'500')}else{$('#respond').before(data);$('html, body').animate({scrollTop:$('#respond').offset().top},'500')}$("#cancel-comment-reply-link").click();$('#commentform textarea[name=comment]').val('');showCommentMsg("评论发表成功","success",false);renderContent()}});return false});replyComments=function(comID){$('#div-comment-'+comID).after($('#respond'));$('#respond').hide().fadeIn();$("#comment_parent").val(comID);return false};$(document).on("click","#cancel-comment-reply-link",function(){$("#comments").prepend($('#respond'));$("#comment_parent").val('')})});

 
/*!
 * mkBlog.js
 */
jQuery(document).ready(function(a){a("img:not(.no-error)").error(function(){if(a(this).hasClass("no-error")){return}a(this).attr("src",mk_theme_api.static_url+"/images/err.png");a(this).addClass("no-error")});a.fn.postLike=function(){if(a(this).children(".likeHeart").hasClass("done")){a(this).children(".count").html("∞");return false}else{a(this).children(".likeHeart").addClass("done");var d=a(this).data("id"),c=a(this).children(".count");a(c).html(parseInt(a(c).html())+1);var b={action:"mk_post_like",id:d,};a.post(mk_theme_api.ajax_url,b,function(e){a(c).html(e)});return false}};a(document).on("click",".favorite",function(){a(this).postLike()});a(document).on("click","#menu-btn",function(){a("body").toggleClass("main-menu-on")});a(window).scroll(function(){if(a(window).scrollTop()<300){a("#scroll-to-top").removeClass("show")}else{a("#scroll-to-top").addClass("show")}});a(document).on("click","#theme-control",function(b){a(".theme-control-panel").css({"right":a(window).width()-a(this).offset().left+20,"bottom":-(a(this).offset().top-a(document).scrollTop()-a(window).height()+a(this).height())}).toggle();b.stopPropagation()});a(document).on("click",".theme-control-panel",function(b){b.stopPropagation()});a(document).click(function(){a(".theme-control-panel").hide()});a(document).on("click","#scroll-to-top",function(){a("html, body").animate({scrollTop:0},"normal");return false});a(document).on("click",".mk-collapse-title",function(b){a(this).next().slideToggle();a(this).toggleClass("mk-collapse-open");b.preventDefault()});a(document).on("click",".mk-tab-title",function(k){var i=a(this),l=i.parent(),j=l.parent(),e=i.attr("data-tab-index");j.find(".mk-tab-title.selected, .mk-tab-content.selected").removeClass("selected");j.find(".mk-tab-title[data-tab-index="+e+"], .mk-tab-content[data-tab-index="+e+"]").addClass("selected");scrollTabsHead=function(m){if(m<0){m=0}try{if(m>l[0].scrollWidth-l.innerWidth()){m=l[0].scrollWidth-l.innerWidth()}}catch(b){console.error(b)}l.animate({scrollLeft:m},500)};if(!mk_theme_api.is_wap){var g=l.offset().left,f=i.offset().left,d=l.innerWidth(),h=i.outerWidth(),c=l.scrollLeft();scrollTabsHead(f+c-g-(d-h)/2)}});a(document).on("click","#comment",function(b){a(".comment-form-tools").slideDown()});a(document).on("click",".comment-form-tools span",function(c){switch(a(this).data("action")){case"emoji":if(!a(this).data("loaded")){a("#comment").emoji({button:a(".comment-form-tools span[data-action=emoji]"),animation:"fade",basePath:mk_theme_api.static_url+"/images/emoji",icons:emojiLists});a(this).data("loaded",true);a(this).click()}break;case"pic":var b='<div class="comment-extra-input comment-pic-input"><h5>插入图片</h5><form onsubmit="return commentExtraPicSubmit(this);" id="comment-pic-upload-form">'+'<input placeholder="输入图片地址（https://）" title="请输入图片链接" type="url" name="url" required>';if(mk_theme_api.can_upload_pic){b+='<h5 class="or">或</h5>'+'<div class="comment-pic-upload">'+'<input type="file" name="smfile" id="comment-pic-upload" multiple="true" onchange="commentUploadPic(this)" title="点击选择或拖拽图片到这里上传">'+'<button class="comment-pic-upload-btn" onclick="return false;"><i class="fa fa-cloud-upload" aria-hidden="true"></i> 本地上传</button></div>'}a.fancybox.open(b+'<button types="submit">确认</button></form></div>');a("#comment-pic-upload").on("dragover",function(){a(this).parent().addClass("ondrag")});a("#comment-pic-upload").on("dragleave",function(){a(this).parent().removeClass("ondrag")});a("#comment-pic-upload").on("drop",function(d,f){a(this).parent().removeClass("ondrag")});break;case"url":a.fancybox.open('<div class="comment-extra-input comment-link-input"><h5>插入链接</h5><form onsubmit="return commentExtraUrlSubmit(this);">'+'<input placeholder="请输入链接地址（https://）" type="url" name="url" required>'+'<input placeholder="请输入链接名称（选填）" type="text" name="name">'+'<button types="submit">确认</button></form></div>');break;case"code":a.fancybox.open('<div class="comment-extra-input comment-code-input"><h5>插入代码</h5><form onsubmit="return commentCodeSubmit(this);">'+'<textarea placeholder="请贴入代码内容" rows="5" name="code" required></textarea>'+'<button types="submit">插入</button></form></div>');break;case"close":a(".comment-form-tools").slideUp();break}c.preventDefault()});if(mk_theme_api.get_qq_info){a(document).on("focus","#comment-author-info #author",function(){showCommentMsg("新功能：在昵称框输入QQ号可快速填写！","success",true)});a(document).on("blur","#comment-author-info #author",function(){var b=a(this).val();if(!(/^[1-9]\d{4,12}$/.test(b))){return}a("#comment-author-info #author").val("");a("#comment-author-info #author").attr("placeholder","获取中...");a.ajax({url:mk_theme_api.ajax_url+"?action=mk_get_qq_info&qq="+b,dataType:"json",complete:function(c,d){a("#comment-author-info #author").removeAttr("placeholder")},success:function(c){try{a("#comment-author-info #author").val(c.nickName);a("#comment-author-info #email").val(b+"@qq.com");return}catch(d){}showCommentMsg("QQ信息获取出错","error",true);a("#comment-author-info #author").val(b)
},error:function(c,e,d){a("#comment-author-info #author").val(b);console.error("QQ信息获取失败 - "+c+e+d)}})})}a(document).on("click","#article-share .share-item",function(d){var c=encodeURIComponent(location.href);var g=encodeURIComponent(document.title);var f=encodeURIComponent(a("meta[property='og:image']").attr("content"));var b=encodeURIComponent(a("meta[property='og:description']").attr("content"));switch(a(this).data("site")){case"weixin":a.fancybox.open('<div class="comment-extra-input comment-code-input" style="text-align: center"><h5>微信扫一扫分享</h5>'+'<img src="'+QRCode.generatePNG(c)+'" class="share-qrcode"></div>');break;case"weibo":g="【"+g+"】"+b;window.open("http://service.weibo.com/share/share.php?url="+c+"&title="+g+"&pic="+f+"&searchPic=true");break;case"qq":window.open("https://connect.qq.com/widget/shareqq/index.html?url="+c+"&desc=&title="+g+"&summary="+b+"&pics="+f+"&flash=&site=&style=201&width=32&height=32&showcount=");break;default:a.fancybox.open('<div class="comment-extra-input comment-code-input" style="text-align: center"><h5>手机扫码浏览</h5>'+'<img src="'+QRCode.generatePNG(c)+'" class="share-qrcode"></div>')}});(function(g,f,c){var b=100;var e=Math.round(100/16*parseFloat(g("html").css("font-size")));if(e%5!==0){e=b}if(e!=b){d()}g("#dark-mode-switch").change(function(){var h=g('<div class="mk-dark-mode-sky"><div class="mk-dark-mode-planet"></div></div>');h.appendTo(g("body"));setTimeout(function(){if(g("#dark-mode-switch").is(":checked")){g("body").addClass("mk-dark");c.cookie="mk-dark-mode=1; path=/"}else{g("body").removeClass("mk-dark");c.cookie="mk-dark-mode=0; path=/"}setTimeout(function(){g(".mk-dark-mode-sky").fadeOut(1000,function(){g(this).remove()})},2000)},50)});g(c).on("click","#font-size-text",function(){if(e==b){e=120}else{e=b}d()});g(c).on("click","#font-size-smaller",function(){if(e>50){e-=5}d()});g(c).on("click","#font-size-larger",function(){e+=5;d()});function d(){g("#font-size-text").text(e*100/b);g("html").css("font-size",e+"%");c.cookie="mk-font-size="+e+"; path=/"}}(jQuery,window,document))});(function(d,c,b){c.commentUploadPic=function(i){if(!i.files||!i.files[0]){return}var g=i.files[0];var f=d(i).next();if(g.type.indexOf("image")!==0){d(f).html('<span style="color: #c50808">请选择图像文件上传</span>');return}var h=new FormData();h.append("pic_upload",i.files[0]);h.append("action","mk_pic_upload");d.ajax({url:mk_theme_api.ajax_url,type:"POST",xhr:function(){myXhr=d.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener("progress",function(e){if(e.lengthComputable){e=e.loaded/e.total;if(e==1){d(f).html('<span style="color: #c50808">文件转存中，请稍候...</span>')}else{d(f).html("上传中，进度："+(e*100)+"%")}}},false)}return myXhr},beforeSend:function(){d(f).html("准备上传..")},success:function(e){if(e.code!=200){d(f).html('<span style="color: #c50808">'+e.msg+"</span>");return}d(".comment-pic-input form")[0].url.value=e.url;commentExtraPicSubmit(d(".comment-pic-input form")[0])},error:function(e){d(f).html('<span style="color: #c50808">图片上传出错</span>');console.log(e)},data:h,dataType:"json",cache:false,contentType:false,processData:false});return false};c.commentExtraPicSubmit=function(e){addEditor(d("#comment")[0]," [img]"+e.url.value+"[/img] ","");d.fancybox.close(true);return false};c.commentExtraUrlSubmit=function(e){if(!e.name.value){e.name.value=e.url.value}e.name.value=e.name.value.replace("[","【").replace("]","】");addEditor(d("#comment")[0]," [url="+e.url.value+"]"+e.name.value+"[/url] ","");d.fancybox.close(true);return false};c.commentCodeSubmit=function(e){addEditor(d("#comment")[0]," [pre]"+e.code.value+"[/pre] ","");d.fancybox.close(true);return false};c.addEditor=function(h,g,l){if(b.selection){h.focus();sel=b.selection.createRange();l?sel.text=g+sel.text+l:sel.text=g;h.focus()}else{if(h.selectionStart||h.selectionStart=="0"){var k=h.selectionStart;var j=h.selectionEnd;var i=j;l?h.value=h.value.substring(0,k)+g+h.value.substring(k,j)+l+h.value.substring(j,h.value.length):h.value=h.value.substring(0,k)+g+h.value.substring(j,h.value.length);l?i+=g.length+l.length:i+=g.length-j+k;if(k==j&&l){i-=l.length}h.focus();h.selectionStart=i;h.selectionEnd=i}else{h.value+=g+l;h.focus()}}};c.showCommentMsg=function(h,g,e){var f;switch(g){case"wait":f='<i class="fa fa-location-arrow" aria-hidden="true"></i> '+h;break;case"success":f='<span class="comment-success"><i class="fa fa-check" aria-hidden="true"></i> '+h+"</span>";break;case"error":f='<span class="comment-error"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> '+h+"</span>";break;default:f=h}d(".comment-form-tools").stop().slideUp();d("#comment-tips").html(f).stop().slideDown();if(e){setTimeout(function(){d("#comment-tips").stop().fadeOut()},3000)}};c.initHomeNotice=function(){if(c.home_notice_scroll_timer){clearInterval(c.home_notice_scroll_timer)}var f=d(".home-notice");if(!f.length){return}if(f.find("li").length<2){return}var e=false;c.home_notice_scroll_timer=setInterval(function(){if(e){return}var g=f.find("li:first").height();
f.find("ul").stop().animate({marginTop:"-"+g+"px"},500,"swing",function(){d(this).css({marginTop:"0px"}).find("li:first").appendTo(this)})},4000);f.mouseover(function(){e=true});f.mouseout(function(){e=false})};var a={init:function(){if(typeof prettyPrint=="undefined"){return}var e=this;e.codePrettify()},codePrettify:function(){var e=this;d("pre code").each(function(){var g=d(this).attr("class");if(!g){g=""}var f=d(this).html();d(this).parent().attr("class","prettyprint linenums lang-"+g).html(f)});d("pre").each(function(){var j=d(this);if(j.hasClass("prettyprinted")){return}if(!j.hasClass("prettyprint")){j.addClass("prettyprint")}if(!j.hasClass("linenums")){j.addClass("linenums")}j.addClass("mk-prettyprint");var h="";var i=d(this).attr("class");var g=/lang-(\w+) /;i=g.exec(i);if(i){i=i[1]}else{i="Source Code"}switch(i.toLowerCase()){case"js":case"javascript":h="JavaScript";break;case"java":case"python":case"shell":h=i.charAt(0).toUpperCase().concat(i.toLowerCase().slice(1));break;case"cpp":h="C/C++";break;case"pl":h="Perl";break;case"py":h="Python";break;case"rb":h="Ruby";break;case"vb":h="ASP/VB";break;case"cs":h="C#";break;case"bsh":case"bash":h="Shell";break;case"html":case"css":case"xml":case"php":h=i.toUpperCase();break;default:h=i}var f="mk-pretty-container";if(j.html().split("\n").length<=3){f+=" mk-pretty-less"}j.wrap('<div class="'+f+'"></div>');j.after(e.codePrettifyToolbar(h));j.wrap('<div class="mk-pretty-prebox"></div>');j.before("<div class='mk-pretty-title'>"+h+"</div>")});prettyPrint();e.codePrettifyToolbarAction()},codePrettifyToolbar:function(f){var e='<div class="mk-pretty-toolbar">';if(f=="HTML"){e+='<buttun title="运行代码" class="btn run-code"><i class="fa fa-play" aria-hidden="true"></i> 运行</buttun>'}e+='<buttun title="复制代码" class="btn copy-code"><i class="fa fa-clipboard" aria-hidden="true"></i> 复制</buttun>'+'<buttun title="以文本模式查看" class="btn view-source"><i class="fa fa-file-text-o" aria-hidden="true"></i> 文本</buttun>'+'<buttun title="以高亮模式查看" class="btn back-to-pretty"><i class="fa fa-file-code-o" aria-hidden="true"></i> 高亮</buttun>'+'<span class="msg"></span>'+"</div>";return e},codePrettifyToolbarAction:function(){_this=this;var e=new ClipboardJS(".copy-code",{text:function(f){$container=d(f).parent().parent();return _this.getPrettifyCode($container)}});e.on("success",function(f){$container=d(f.trigger).parent().parent();$container.find(".msg").hide().text("已复制").stop().fadeIn().delay(1500).fadeOut(500)});e.on("error",function(f){$container=d(f.trigger).parent().parent();$container.find(".msg").hide().text("暂不支持当前浏览器，请手动复制").stop().fadeIn().delay(3000).fadeOut(500);$container.find(".view-source").trigger("click")});d(".mk-pretty-toolbar .btn").unbind().on("click",function(){$container=d(this).parent().parent();if(d(this).hasClass("view-source")){code=_this.getPrettifyCode($container);if(!$container.find("textarea").length){$container.find(".mk-pretty-prebox").append('<textarea class="mk-pretty-text" readonly>'+code+"</textarea>")}else{$container.find("textarea").val(code)}var g=$container.find("pre");$container.find("textarea").css({height:g.height()}).show().select();$container.find("pre").css({opacity:0});$container.find(".view-source").hide();$container.find(".back-to-pretty").css("display","inline-block")}else{if(d(this).hasClass("back-to-pretty")){$container.find(".back-to-pretty").hide();$container.find(".view-source").show();$container.find("pre").css({opacity:1});$container.find("textarea").hide()}else{if(d(this).hasClass("run-code")){code=_this.getPrettifyCode($container);var f=c.open("","_blank","");f.document.open("text/html","replace");f.opener=null;f.document.write(code);f.document.close()}}}})},getPrettifyCode:function(e){code=[];e.find("li").each(function(){code.push(d(this).text())});code=code.join("\r");code=code.replace(/\u00a0/g," ");return code}};c.parseEmoji=function(){d(".home-notice, .shuoshuo-content-inner, .entry-content, .comment-content-text, .archive-content, .emoji-content").emojiParse({basePath:mk_theme_api.static_url+"/images/emoji",icons:emojiLists})};c.initFancybox=function(){d("a[href*='.jpg'],a[href*='.png'],a[href*='.gif'],a[href*='.jpeg'],a[href*='.webp']").each(function(){try{var f=d(this).attr("href").split("?")[0];if(f.endsWith(".jpg")||f.endsWith(".png")||f.endsWith(".gif")||f.endsWith(".jpeg")||f.endsWith(".webp")){if(!d(this).attr("data-fancybox")&&(d(this).attr("no-fancybox")==undefined)&&!d(this).attr("download")){if((d(this).attr("target")!="_blank")||(d(this).find("img").length!=0)){d(this).attr("data-fancybox","images").attr("data-no-instant","true")}}}}catch(g){console.log(g.name+"[灯箱异常]: "+g.message)}});var e=encodeURIComponent(b.title);d("[data-fancybox]").fancybox({thumbs:{autoStart:false,},buttons:["zoom","share","download","thumbs","close"],lang:"cn",i18n:{cn:{CLOSE:"关闭",NEXT:"上一张",PREV:"下一张",ERROR:"Ooops，这张图片加载失败！请稍后重试",PLAY_START:"开始幻灯片放映",PLAY_STOP:"停止幻灯片放映",FULL_SCREEN:"全屏",THUMBS:"缩略图",DOWNLOAD:"下载这张图片",SHARE:"分享这张图片",ZOOM:"缩放"}},share:{url:function(f,g){return((!f.currentHash&&!(g.type==="inline"||g.type==="html")?g.origSrc||g.src:false)||c.location)
},tpl:'<div class="fancybox-share">'+"<h1>{{SHARE}}</h1>"+"<p>"+'<a class="fancybox-share__button fancybox-share__button--qq" href="https://connect.qq.com/widget/shareqq/index.html?url={{url}}&desc={{descr}}&title='+e+'&summary={{descr}}&pics={{media}}&flash=&site=&style=201&width=32&height=32&showcount=" target="_blank">'+'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><defs><style/></defs><path d="M868.79 709.71s-25.4 70.297-72.298 133.395c0 0 83.797 28.6 76.697 103.197 0 0 2.8 83.098-178.694 77.398 0 0-127.697-10-165.895-64.398h-33.7c-38.198 54.398-165.895 64.398-165.895 64.398-181.594 5.7-178.694-77.398-178.694-77.398-7.2-74.598 76.697-103.197 76.697-103.197C180.01 780.007 154.41 709.71 154.41 709.71c-113.396 184.995-102.097-25.8-102.097-25.8 11.5-67.597 43.1-122.596 69.598-158.694 28.9-39.5 50.399-83.798 62.499-131.197l3.7-14.3c5.6-22.099 9-44.698 10.8-67.397C225.407-5.77 506.1-.17 512.1.03c6-.2 286.592-5.8 312.99 312.09 1.9 22.7 5.2 45.3 10.8 67.399l3.7 14.3c12.1 47.398 33.6 91.697 62.499 131.196 26.499 36.198 58.098 91.097 69.598 158.695 0 0 11.3 210.794-102.897 26z" fill="#fff"/></svg>'+"<span>腾讯QQ</span>"+"</a>"+'<a class="fancybox-share__button fancybox-share__button--wb" href="http://service.weibo.com/share/share.php?url={{url}}&title='+e+'&pic={{media}}&searchPic=true" target="_blank">'+'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="128" height="128"><defs><style/></defs><path d="M449.763 248.489c-61.461-5.184-204.13 41.468-337.42 258.68 0 0-97.746 175.745 101.201 281.142 0 0 166.119 98.733 400.61 29.373 0 0 237.946-78.74 216.224-243.87 0 0-18.018-68.373-102.188-88.366 0 0-25.918-3.456-11.354-29.373 0 0 37.271-76.025-35.544-107.372 0 0-64.917-15.55-143.657 24.19 0 0-51.835 29.372-26.904-34.557-.494-.74 11.6-83.676-60.968-89.847zm236.959 356.426c0 89.847-116.011 188.58-257.94 188.58-166.859 0-257.94-72.816-257.94-163.403 0-89.847 131.562-176.486 274.231-176.486 142.176 0 241.649 61.462 241.649 151.309z" fill="#fff"/><path d="M543.066 636.262c-4.197 65.658-59.734 116.752-133.29 119.467-89.106 3.456-147.853-37.271-137.486-117.739 7.9-65.657 64.917-121.194 137.486-121.194 73.556 0 138.473 39.74 133.29 119.466zm-87.38-17.525c0-9.626-7.898-17.278-17.277-17.278s-17.279 7.899-17.279 17.278 7.899 17.279 17.279 17.279c9.38.987 17.278-6.665 17.278-17.279zm-46.65 41.715c0-23.45-21.722-42.455-45.911-39s-47.639 21.722-47.639 44.924c0 23.45 19.994 40.727 44.924 40.727 25.176.988 48.626-23.202 48.626-46.651zm272.503-438.621c4.196-1.728 7.898-2.468 12.094-3.456 4.196-.74 8.64-1.728 13.823-2.468-14.81 1.728-2.468.74 0 0 3.456 0 6.911-.74 11.354-.74h21.721c4.197 0 7.9.74 12.095.74-11.354-1.728-3.455-.74-.74 0s5.183.74 8.639 1.728c8.639 1.728 17.278 4.196 25.917 7.898 2.469.74 4.196 1.728 6.912 2.469-8.64-3.456-.74 0 .74 0 5.184 2.468 10.367 5.183 16.291 8.639 4.196 2.468 9.626 5.924 13.823 8.639 2.468 1.728 4.196 3.456 6.91 5.183-6.91-5.183.741.74 1.729 1.728 9.626 7.899 18.019 16.291 26.904 25.918.741.74 6.912 8.639.741.74 1.728 1.728 2.468 4.196 4.196 5.924 2.468 4.196 5.184 8.64 7.899 12.095 2.468 4.196 4.196 8.639 5.924 13.082 3.455 7.899-2.469-7.899 0 0 .74 2.468 1.728 5.184 3.455 8.64 2.469 7.898 4.197 16.29 5.924 25.176 0 1.728.74 4.196.74 5.924-1.727-11.354-.74-4.196 0-1.728.741 4.196.741 8.64.741 13.823 0 6.911 0 14.81-.74 21.721 0 3.456-.74 6.911-.74 10.367 1.727-13.823 0 0-.741 2.468-1.728 9.627-4.196 18.02-6.911 26.905-1.728 5.184-7.9 18.019-.74 2.468-7.9 17.279-5.184 38.013 13.081 48.38 15.55 8.639 40.728 5.183 48.38-13.083 21.72-47.638 25.917-104.656 11.354-155.75-25.918-91.822-116.012-154.024-208.574-161.676-25.917-1.728-54.55 0-78.74 8.64-18.018 5.923-30.36 24.189-25.176 43.195 2.715 19.5 23.449 33.322 41.715 26.41z" fill="#fff"/><path d="M699.557 320.317c2.469-.74 4.196-.74 6.912-1.728 7.898-1.728-4.197 0 2.468 0 3.456 0 7.899-.74 11.354-.74 13.823 0 29.373 3.455 40.728 13.822 1.727 1.728 3.455 3.456 5.924 5.184 0 0 5.183 5.924 2.468 3.455 1.728 1.728 2.468 4.197 3.455 5.924s1.728 2.469 1.728 4.197c-.74-1.728-.74-1.728 0 .74 1.728 4.196 2.469 8.64 3.456 13.082 1.728 6.911 0-4.196 0 1.728v18.266c0 1.727 0 3.455-.74 4.196.74-7.899 0-.74 0 0-.741 2.468-.741 5.183-1.728 7.898-3.456 12.095 4.196 25.918 16.29 28.633 13.083 3.456 25.177-4.196 28.633-16.291 12.095-39 2.468-84.91-28.632-111.568-27.646-25.177-71.088-33.816-107.373-23.45-26.41 9.627-13.328 54.55 15.057 46.652z" fill="#fff"/></svg>'+"<span>新浪微博</span>"+"</a>"+'<a class="fancybox-share__button fancybox-share__button--qzone" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{url}}&title='+e+'&pics={{media}}&summary={{descr}}&desc={{descr}}" target="_blank">'+'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="128" height="128"><defs><style/></defs><path d="M740.779 440.256L460.885 637.568s112.342 16.384 281.75 14.485l-7.723-32.64 241.387-205.525a14.187 14.187 0 0 0 4.309-15.275 14.55 14.55 0 0 0-12.63-9.856L649.772 361.9 525.44 72.768A14.592 14.592 0 0 0 512 64a14.592 14.592 0 0 0-13.44 8.768l-124.33 289.13-318.209 26.86a14.528 14.528 0 0 0-12.629 9.855 14.187 14.187 0 0 0 4.31 15.275l241.386 205.525-72.363 305.75a14.272 14.272 0 0 0 5.632 14.869 14.96 14.96 0 0 0 16.15.64L512 778.582l273.493 162.09a14.912 14.912 0 0 0 16.15-.64 14.25 14.25 0 0 0 5.632-14.87l-57.216-241.77c24.533-12.16 51.562-32.661 51.562-32.661s-107.093 51.413-491.605 26.304l278.656-198.507s-10.944-16.747-360.192-28.693c-23.36-.811 284.736-57.43 512.299-9.579" fill="#fff"/></svg>'+"<span>QQ空间</span>"+"</a>"+"</p>"+'<p><input class="fancybox-share__input" type="text" value="{{url_raw}}" /></p>'+"</div>"}})
};c.renderContent=function(){parseEmoji();if(mk_theme_api.code_highlight){a.init()}};c.initTheme=function(){d(".headroom").headroom({offset:100});d("[data-autoMenu]").autoMenu();renderContent();initFancybox();initHomeNotice()}}(jQuery,window,document));
